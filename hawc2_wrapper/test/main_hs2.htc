begin aero;
  nblades  3;
  hub_vec shaft -3;
  link 1 mbdy_c2_def blade1;
  link 2 mbdy_c2_def blade2;
  link 3 mbdy_c2_def blade3;
  ae_filename ./data/DTU_10MW_RWT_ae.dat;
  pc_filename ./data/DTU_10MW_RWT_pc.dat;
  induction_method 1;
  aerocalc_method  1;
  aerosections 50;
  ae_sets         1 1 1;
  tiploss_method  1;
  dynstall_method 2;
end aero;
begin wind;
  density 1.225000e+00;
  wsp 8.000000e+00;
  tint 0.000000e+00;
  horizontal_input  1;
  windfield_rotations 0.000000e+00 0.000000e+00 0.000000e+00;
  center_pos0 0.000000e+00 0.000000e+00 -1.190000e+02;
  shear_format         1 1.400000e-01;
  turb_format          0;
  tower_shadow_method  0;
end wind;
begin new_htc_structure;
  begin main_body;
    name        tower;
    type        timoschenko;
    nbodies     1;
    node_distribution     c2_def;
    damping_posdef 0.000000e+00 0.000000e+00 0.000000e+00 4.120000e-03 4.120000e-03 4.500000e-04;
    begin timoschenko_input;
      filename data/DTU_10MW_RWT_Tower_st.dat;
      set 1 1;
    end timoschenko_input;
    begin c2_def;
      nsec 11;
      sec  1  0.000000000000000e+00  0.000000000000000e+00  0.000000000000000e+00  0.000000000000000e+00;
      sec  2  0.000000000000000e+00  0.000000000000000e+00 -1.150000000000000e+01  0.000000000000000e+00;
      sec  3  0.000000000000000e+00  0.000000000000000e+00 -2.300000000000000e+01  0.000000000000000e+00;
      sec  4  0.000000000000000e+00  0.000000000000000e+00 -3.450000000000000e+01  0.000000000000000e+00;
      sec  5  0.000000000000000e+00  0.000000000000000e+00 -4.600000000000000e+01  0.000000000000000e+00;
      sec  6  0.000000000000000e+00  0.000000000000000e+00 -5.750000000000000e+01  0.000000000000000e+00;
      sec  7  0.000000000000000e+00  0.000000000000000e+00 -6.900000000000000e+01  0.000000000000000e+00;
      sec  8  0.000000000000000e+00  0.000000000000000e+00 -8.050000000000000e+01  0.000000000000000e+00;
      sec  9  0.000000000000000e+00  0.000000000000000e+00 -9.200000000000000e+01  0.000000000000000e+00;
      sec 10  0.000000000000000e+00  0.000000000000000e+00 -1.035000000000000e+02  0.000000000000000e+00;
      sec 11  0.000000000000000e+00  0.000000000000000e+00 -1.156300000000000e+02  0.000000000000000e+00;
    end c2_def;
  end main_body;
  begin main_body;
    name        towertop;
    type        timoschenko;
    nbodies     1;
    node_distribution     c2_def;
    damping_posdef 0.000000e+00 0.000000e+00 0.000000e+00 7.000000e-03 7.000000e-03 7.000000e-03;
    concentrated_mass 2.000000e+00 0.000000e+00 2.687000e+00 3.006100e-01 4.460400e+05 4.106000e+06 4.106000e+05 4.106000e+06;
    begin timoschenko_input;
      filename data/DTU_10MW_RWT_Towertop_st.dat;
      set 1 2;
    end timoschenko_input;
    begin c2_def;
      nsec 2;
      sec  1  0.000000000000000e+00  0.000000000000000e+00  0.000000000000000e+00  0.000000000000000e+00;
      sec  2  0.000000000000000e+00  0.000000000000000e+00 -2.750000000000000e+00  0.000000000000000e+00;
    end c2_def;
  end main_body;
  begin main_body;
    name        shaft;
    type        timoschenko;
    nbodies     1;
    node_distribution     c2_def;
    damping_posdef 0.000000e+00 0.000000e+00 0.000000e+00 4.650000e-04 4.650000e-04 3.983000e-03;
    concentrated_mass 1.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 3.751000e+06;
    concentrated_mass 5.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 1.055200e+05 0.000000e+00 0.000000e+00 3.257000e+05;
    begin timoschenko_input;
      filename data/DTU_10MW_RWT_Shaft_st.dat;
      set 1 1;
    end timoschenko_input;
    begin c2_def;
      nsec 5;
      sec  1  0.000000000000000e+00  0.000000000000000e+00  0.000000000000000e+00  0.000000000000000e+00;
      sec  2  0.000000000000000e+00  0.000000000000000e+00  1.500000000000000e+00  0.000000000000000e+00;
      sec  3  0.000000000000000e+00  0.000000000000000e+00  3.000000000000000e+00  0.000000000000000e+00;
      sec  4  0.000000000000000e+00  0.000000000000000e+00  4.400000000000000e+00  0.000000000000000e+00;
      sec  5  0.000000000000000e+00  0.000000000000000e+00  7.100000000000000e+00  0.000000000000000e+00;
    end c2_def;
  end main_body;
  begin main_body;
    name        hub1;
    type        timoschenko;
    nbodies     1;
    node_distribution     c2_def;
    damping_posdef 0.000000e+00 0.000000e+00 0.000000e+00 3.000000e-06 3.000000e-06 2.000000e-05;
    begin timoschenko_input;
      filename data/DTU_10MW_RWT_Hub_st.dat;
      set 1 2;
    end timoschenko_input;
    begin c2_def;
      nsec 2;
      sec  1  0.000000000000000e+00  0.000000000000000e+00  0.000000000000000e+00  0.000000000000000e+00;
      sec  2  0.000000000000000e+00  0.000000000000000e+00  2.800000000000000e+00  0.000000000000000e+00;
    end c2_def;
  end main_body;
  begin main_body;
    name           hub2;
    copy_main_body hub1;
  end main_body;
  begin main_body;
    name           hub3;
    copy_main_body hub1;
  end main_body;
  begin main_body;
    name        blade1;
    type        timoschenko;
    nbodies     10;
    node_distribution     c2_def;
    damping_posdef 0.000000e+00 0.000000e+00 0.000000e+00 1.530000e-03 2.550000e-03 3.300000e-04;
    begin timoschenko_input;
      filename data/DTU_10MW_RWT_Blade_st.dat;
      set 1 1;
    end timoschenko_input;
    begin c2_def;
      nsec 27;
      sec  1  0.000000000000000e+00  7.006000000000000e-05  4.440890000000000e-16 -1.450000000000000e+01;
      sec  2 -2.064770000000000e-05 -1.221190000000000e-02  3.000000000000000e+00 -1.450000000000000e+01;
      sec  3 -7.288100000000000e-03 -2.492510000000000e-02  6.000000000000000e+00 -1.448510000000000e+01;
      sec  4 -1.892350000000000e-02 -2.733510000000000e-02  7.000040000000000e+00 -1.446100000000000e+01;
      sec  5 -5.412820000000000e-02 -2.821630000000000e-02  8.700510000000000e+00 -1.433880000000000e+01;
      sec  6 -1.266330000000000e-01 -2.132100000000000e-02  1.040200000000000e+01 -1.402010000000000e+01;
      sec  7 -2.256660000000000e-01 -1.283780000000000e-02  1.220460000000000e+01 -1.339040000000000e+01;
      sec  8 -2.885630000000000e-01 -7.706590000000000e-03  1.320650000000000e+01 -1.293710000000000e+01;
      sec  9 -3.991940000000000e-01 -4.883170000000000e-03  1.501000000000000e+01 -1.194450000000000e+01;
      sec 10 -5.766340000000000e-01 -1.802960000000000e-02  1.821510000000000e+01 -9.982430000000001e+00;
      sec 11 -7.071360000000000e-01 -5.017720000000000e-02  2.141780000000000e+01 -8.451470000000000e+00;
      sec 12 -7.910810000000000e-01 -9.412280000000001e-02  2.461890000000000e+01 -7.464170000000000e+00;
      sec 13 -8.371950000000000e-01 -1.488800000000000e-01  2.781930000000000e+01 -6.729160000000000e+00;
      sec 14 -8.539480000000000e-01 -2.145140000000000e-01  3.101940000000000e+01 -6.088420000000000e+00;
      sec 15 -8.493670000000000e-01 -2.906180000000000e-01  3.421970000000000e+01 -5.493220000000000e+00;
      sec 16 -7.939200000000000e-01 -4.625740000000000e-01  4.022040000000000e+01 -4.392220000000000e+00;
      sec 17 -7.162840000000000e-01 -6.884370000000000e-01  4.662170000000000e+01 -3.093150000000000e+00;
      sec 18 -6.343580000000000e-01 -9.600170000000000e-01  5.302320000000000e+01 -1.756290000000000e+00;
      sec 19 -5.531790000000000e-01 -1.284240000000000e+00  5.942450000000000e+01 -5.006500000000000e-01;
      sec 20 -4.754220000000000e-01 -1.664020000000000e+00  6.582550000000001e+01  6.019640000000001e-01;
      sec 21 -4.031800000000000e-01 -2.107430000000000e+00  7.222610000000000e+01  1.555600000000000e+00;
      sec 22 -3.300850000000000e-01 -2.656300000000000e+00  7.902660000000000e+01  2.519350000000000e+00;
      sec 23 -3.101400000000000e-01 -2.788820000000000e+00  8.052670000000001e+01  2.729500000000000e+00;
      sec 24 -2.867190000000000e-01 -2.925170000000000e+00  8.202710000000000e+01  2.932010000000000e+00;
      sec 25 -2.558230000000000e-01 -3.065770000000000e+00  8.352740000000000e+01  3.118740000000000e+00;
      sec 26 -2.078910000000000e-01 -3.209520000000000e+00  8.502770000000000e+01  3.288470000000000e+00;
      sec 27 -8.989400000000000e-02 -3.336850000000000e+00  8.636550000000000e+01  3.427960000000000e+00;
    end c2_def;
  end main_body;
  begin main_body;
    name           blade2;
    copy_main_body blade1;
  end main_body;
  begin main_body;
    name           blade3;
    copy_main_body blade1;
  end main_body;
  begin orientation;
    begin base;
      body tower;
      inipos 0.000000e+00 0.000000e+00 0.000000e+00;
      body_eulerang 0.000000e+00 0.000000e+00 0.000000e+00;
    end base;
    begin relative;
      body1 tower last;
      body2 towertop 1;
      body2_eulerang 0.000000e+00 0.000000e+00 0.000000e+00;
    end relative;
    begin relative;
      body1 towertop last;
      body2 shaft 1;
      body2_eulerang 9.000000e+01 0.000000e+00 0.000000e+00;
      body2_eulerang 5.000000e+00 0.000000e+00 0.000000e+00;
      body2_ini_rotvec_d1 0.000000e+00 0.000000e+00 -1.000000e+00 3.140000e-01;
    end relative;
    begin relative;
      body1 shaft last;
      body2 hub1 1;
      body2_eulerang -9.000000e+01 0.000000e+00 0.000000e+00;
      body2_eulerang 0.000000e+00 1.800000e+02 0.000000e+00;
      body2_eulerang 2.500000e+00 0.000000e+00 0.000000e+00;
    end relative;
    begin relative;
      body1 shaft last;
      body2 hub2 1;
      body2_eulerang -9.000000e+01 0.000000e+00 0.000000e+00;
      body2_eulerang 0.000000e+00 6.000000e+01 0.000000e+00;
      body2_eulerang 2.500000e+00 0.000000e+00 0.000000e+00;
    end relative;
    begin relative;
      body1 shaft last;
      body2 hub3 1;
      body2_eulerang -9.000000e+01 0.000000e+00 0.000000e+00;
      body2_eulerang 0.000000e+00 -6.000000e+01 0.000000e+00;
      body2_eulerang 2.500000e+00 0.000000e+00 0.000000e+00;
    end relative;
    begin relative;
      body1 hub1 last;
      body2 blade1 1;
      body2_eulerang 0.000000e+00 0.000000e+00 0.000000e+00;
    end relative;
    begin relative;
      body1 hub2 last;
      body2 blade2 1;
      body2_eulerang 0.000000e+00 0.000000e+00 0.000000e+00;
    end relative;
    begin relative;
      body1 hub3 last;
      body2 blade3 1;
      body2_eulerang 0.000000e+00 0.000000e+00 0.000000e+00;
    end relative;
  end orientation;
  begin constraint;
    begin fix0;
      body tower;
    end fix0;
    begin fix1;
      body1 tower last;
      body2 towertop 1;
    end fix1;
    begin bearing1;
      name shaft_rot;
      body1 towertop last;
      body2 shaft 1;
      bearing_vector 2 0.000000e+00 0.000000e+00 -1.000000e+00;
    end bearing1;
    begin fix1;
      body1 shaft last;
      body2 hub1 1;
    end fix1;
    begin fix1;
      body1 shaft last;
      body2 hub2 1;
    end fix1;
    begin fix1;
      body1 shaft last;
      body2 hub3 1;
    end fix1;
    begin bearing2;
      name pitch1;
      body1 hub1 last;
      body2 blade1 1;
      bearing_vector 2 0.000000e+00 0.000000e+00 -1.000000e+00;
    end bearing2;
    begin bearing2;
      name pitch2;
      body1 hub2 last;
      body2 blade2 1;
      bearing_vector 2 0.000000e+00 0.000000e+00 -1.000000e+00;
    end bearing2;
    begin bearing2;
      name pitch3;
      body1 hub3 last;
      body2 blade3 1;
      bearing_vector 2 0.000000e+00 0.000000e+00 -1.000000e+00;
    end bearing2;
  end constraint;
end new_htc_structure;
begin hawcstab2;
  begin ground_fixed_substructure;
    main_body tower;
    main_body towertop;
  end ground_fixed_substructure;
  begin rotating_axissym_substructure;
    main_body shaft;
  end rotating_axissym_substructure;
  begin rotating_threebladed_substructure;
    main_body hub1;
    main_body blade1;
    second_order_actuator pitch1 1.000000e+00 7.000000e-01;
  end rotating_threebladed_substructure;
  operational_data_filename h2s.opt;
  begin operational_data;
    windspeed 5.000000e+00 2.500000e+01 22;
    genspeed 2.998500e+02 4.795657e+02;
    gearratio 5.000000e+01;
    minpitch 0.000000e+00;
    opt_lambda  8.500000000000000e+00;
    maxpow 1.064162e+04;
    prvs_turbine 1;
    include_torsiondeform 0;
  end operational_data;
  begin controller_tuning;
    partial_load 0.050000 0.700000;
    full_load 0.060000 0.700000;
    gain_scheduling 2;
    constant_power 1;
  end controller_tuning;
  begin controller;
    begin input;
      constraint bearing1 shaft_rot;
      constraint bearing2 pitch1 collective;
    end input;
    begin output;
      constraint bearing1 shaft_rot 1 only 2;
      constraint bearing2 pitch1 1 only 1 collective;
    end output;
  end controller;
  print_full_precision;
  steady_state_convergence_limits 1e-15 10000 0.1 1e-07 1000 0 25 5 1e-12 ;
  compute_optimal_pitch_angle use_operational_data; 
  basic_dtu_we_controller 7.084020000000000e+07 1.589650000000000e+07 1.179670000000000e+07 1.186970000000000e+00 3.649080000000000e-01 1.012612000000000e+01 4.351998000000000e+02 4.000000000000000e-01 7.000000000000000e-01 1.920000000000000e+00 1 0.000000000000000e+00 1.000000000000000e+00 0.000000000000000e+00;
  compute_steady_states nobladedeform tipcorrect induction nogradients;
  save_induction;
  save_power;
end hawcstab2;
